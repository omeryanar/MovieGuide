@page "/tv/{Id:int}"

<LoadingContent LoadingObject="TvShow">
    <MudStack Class="flex-wrap" Row="true">
        <MudImage Class="rounded-lg detail-img" Src="@TvShow.PosterFullPath" />
        <MudStack Class="detail-info">
            <MudStack Class="flex-wrap" Row="true">
                <MudText Typo="Typo.h1">@TvShow.Name</MudText>
                <MudText Typo="Typo.h2">@TvShow.FirstAirDate?.ToString("(yyyy)")</MudText>
            </MudStack>
            <GenreChipSet Genres="@TvShow.Genres" MediaType="MediaType.TvShow" />
            <MudStack Row="true" AlignItems="AlignItems.Center">
                <RatingCircular Value="@TvShow.VoteAverage" Size="Size.Large" />
                <MudText Typo="Typo.h4" Style="font-weight:500; font-style:italic">@TvShow.LocalizedTagline</MudText>
            </MudStack>
            <MudElement Class="d-none d-sm-flex flex-column gap-3">
                <LabeledItem Label="@Resources.Overview" Text="@TvShow.LocalizedOverview" />
                <FeaturedCrewLinkSet FeaturedCrew="@TvShow.FeaturedCrew" />
            </MudElement>
        </MudStack>
        <MudStack Class="d-sm-none">
            <LabeledItem Label="@Resources.Overview" Text="@TvShow.LocalizedOverview" />
            <FeaturedCrewLinkSet FeaturedCrew="@TvShow.FeaturedCrew" />
        </MudStack>
    </MudStack>
    <MudGrid Class="mt-4">
        <MudItem sm="12" md="9">
            <MudStack>
                <ExpansionPanel Title="@Resources.Starring" Items="TvShow.Starring" Expanded="true">
                    <PersonCastCard Cast="context" />
                </ExpansionPanel>
                <ExpansionPanel Title="@Resources.Crew" Items="TvShow.Crew">
                    <PersonCrewCard Crew="context" />
                </ExpansionPanel>
                <ExpansionPanel Title="@Resources.Seasons" Items="TvShow.Seasons">
                    <TvSeasonCard TvShow="TvShow" Season="context" />
                </ExpansionPanel>
                <ExpansionPanel Title="@Resources.Posters" Items="TvShow.Images?.Posters">
                    <MudLink Target="_blank" Href="@(String.Format(Constants.Original, context.FilePath))">
                        <MudImage Width="185" Height="278" Src="@(String.Format(Constants.W185, context.FilePath))" />
                    </MudLink>
                </ExpansionPanel>
                <ExpansionPanel Title="@Resources.Backdrops" Items="TvShow.Images?.Backdrops">
                    <MudLink Target="_blank" Href="@(String.Format(Constants.Original, context.FilePath))">
                        <MudImage Width="300" Height="169" Src="@(String.Format(Constants.W300, context.FilePath))" />
                    </MudLink>
                </ExpansionPanel>
                <ExpansionPanel Title="@Resources.Videos" Items="TvShow.Videos?.Results">
                    <MudLink Target="_blank" Href="@(String.Format(Constants.YoutubeVideo, context.Key))">
                        <MudImage Width="240" Height="180" Src="@(String.Format(Constants.YouTubeImage, context.Key))" />
                    </MudLink>
                </ExpansionPanel>
            </MudStack>
        </MudItem>
        <MudItem sm="12" md="3">
            <MudStack Spacing="4">
                <MudStack Row="true" Class="mx-n2" Spacing="0">
                    <SocialMediaLink SocialMedia="SocialMediaType.ImdbTitle" Id="@TvShow.ExternalIds?.ImdbId" />
                    <SocialMediaLink SocialMedia="SocialMediaType.Youtube" Id="@TvShow.TrailerLink" />
                </MudStack>
                <LabeledItem Label="@Resources.OriginalLanguage" Text="@LanguageName" />
                <LabeledItem Label="@Resources.OriginalTitle" Text="@TvShow.OriginalName" />
                <LabeledItem Label="@Resources.Status" Text="@TvShow.Status?.GetLocalizedText()" />
                <LabeledItem Label="@Resources.Runtime" Text="@TvShow.EpisodeRunTime?.GetRuntimeDescription()" />
                <LabeledItem Label="@Resources.Networks" ChildObject="TvShow.Networks.FirstOrDefault()">
                    <NetworkLinkSet Networks="TvShow.Networks" />
                </LabeledItem>
                <LabeledItem Label="@Resources.ProductionCountries" Text="@TvShow.Countries" />
                <LabeledItem Label="@Resources.Keywords" ChildObject="TvShow.Keywords.Results.FirstOrDefault()">
                    <KeywordChipSet Keywords="TvShow.Keywords.Results" MediaType="MediaType.TvShow" />
                </LabeledItem>
                <LabeledItem Label="@Resources.ProductionCompanies" ChildObject="TvShow.ProductionCompanies.FirstOrDefault()">
                    <CompanyChipSet Companies="TvShow.ProductionCompanies" MediaType="MediaType.TvShow" />
                </LabeledItem>
            </MudStack>
        </MudItem>
    </MudGrid>
</LoadingContent>
